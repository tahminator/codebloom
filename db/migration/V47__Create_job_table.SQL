DO $$ BEGIN 
    CREATE TYPE "JobStatus" AS ENUM ('COMPLETE', 'PROCESSING', 'INCOMPLETE');
EXCEPTION
    WHEN duplicate_object THEN null;
END $$;

CREATE TABLE IF NOT EXISTS "Job" (
    id UUID PRIMARY KEY NOT NULL,
    "createdAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    "processedAt" TIMESTAMP WITH TIME ZONE,
    "completedAt" TIMESTAMP WITH TIME ZONE,
    "nextAttemptAt" TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT NOW(),
    status "JobStatus" NOT NULL DEFAULT 'INCOMPLETE',
    "questionId" VARCHAR(255) NOT NULL UNIQUE
);